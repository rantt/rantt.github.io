var Game={w:640,h:980};null===localStorage.getItem("atHighestScore")&&localStorage.setItem("atHighestScore",0),null===localStorage.getItem("atHighestCombo")&&localStorage.setItem("atHighestCombo",0),Game.Boot=function(t){this.game=t},Game.Boot.prototype={preload:function(){this.game.stage.backgroundColor="#000",this.game.load.image("loading","assets/images/loading.png"),this.game.load.image("title","assets/images/title.png"),this.game.load.image("instructions","assets/images/instructions.png"),this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.maxHeight=window.innerHeight,this.game.scale.maxWidth=window.innerHeight*(Game.w/Game.h),this.game.stage.scale.pageAlignHorizontally=!0,this.game.stage.scale.pageAlignVeritcally=!0,this.game.scale.setScreenSize(!0)},create:function(){this.game.state.start("Load")}},Game.Load=function(t){this.game=t},Game.Load.prototype={preload:function(){var t=this.game.add.text(Game.w,Game.h,"Loading...",{font:"30px Helvetica",fill:"#000"});t.anchor.setTo(.5,.5);var e=this.game.add.sprite(Game.w/2-64,Game.h/2+50,"loading");this.game.load.setPreloadSprite(e),this.game.load.bitmapFont("akashi","assets/fonts/akashi/akashi.png","assets/fonts/akashi/akashi.fnt"),this.game.load.image("twitter","assets/images/twitter.png"),this.game.load.atlasXML("hearts","assets/images/hearts.png","assets/atlas/hearts.xml"),this.game.load.audio("boom","assets/audio/boom.wav"),this.game.load.audio("miss","assets/audio/miss.wav"),this.game.load.audio("music",["assets/audio/sky.ogg","assets/audio/sky.mp3"])},create:function(){this.game.state.start("Menu")}},Game.Menu=function(t){this.game=t},Game.Menu.prototype={create:function(){this.titleText=this.game.add.bitmapText(Game.w/2,Game.h/2,"akashi","Against Type",64),this.titleText.anchor.setTo(.5,.5),this.redText=this.game.add.bitmapText(Game.w/5,Game.h/2+100,"akashi","red",24),this.redText.anchor.setTo(.5,.5),this.redText.tint=255,this.blueText=this.game.add.bitmapText(Game.w/5*2,Game.h/2+100,"akashi","blue",24),this.blueText.anchor.setTo(.5,.5),this.blueText.tint=16711680,this.greenText=this.game.add.bitmapText(Game.w/5*3,Game.h/2+100,"akashi","green",24),this.greenText.anchor.setTo(.5,.5),this.greenText.tint=16776960,this.yellowText=this.game.add.bitmapText(Game.w/5*4,Game.h/2+100,"akashi","yellow",24),this.yellowText.anchor.setTo(.5,.5),this.yellowText.tint=65280,this.clickText=this.game.add.bitmapText(Game.w/2,Game.h/2+200,"akashi","click to start",24),this.clickText.anchor.setTo(.5,.5);var t=this.game.add.text(Game.w/2,Game.h/2-50,"~click to start~",{font:"30px Helvetica",fill:"#000"});t.anchor.setTo(.5,.5)},update:function(){this.game.input.activePointer.isDown&&this.game.state.start("Play")}};var wKey,aKey,sKey,dKey,currentColor,score,combo=0,level_names=["easy does it","Pretty Good :)","$#!^, got real!","TOO FAST!!","THE CHOSEN ONE!"],level=0,speed=2e3,experience=0,nextLevel=1e3,chosen=!1,life=4,showInstructions=!0,gameOver=!1,resetWait;Game.Play=function(t){this.game=t},Game.Play.prototype={create:function(){this.game.world.setBounds(0,0,Game.w,Game.h),this.highestScore=parseInt(JSON.parse(localStorage.getItem("atHighestScore"))),this.highestCombo=parseInt(JSON.parse(localStorage.getItem("atHighestCombo"))),this.nextWordIn=this.game.time.now,score=0,this.music=this.game.add.sound("music"),this.music.volume=.5,this.music.play("",0,1,!0),this.boomSnd=this.game.add.sound("boom"),this.boomSnd.volume=.5,this.missSnd=this.game.add.sound("miss"),this.missSnd.volume=.5,wKey=this.game.input.keyboard.addKey(Phaser.Keyboard.W),aKey=this.game.input.keyboard.addKey(Phaser.Keyboard.A),sKey=this.game.input.keyboard.addKey(Phaser.Keyboard.S),dKey=this.game.input.keyboard.addKey(Phaser.Keyboard.D);var t=this.game.add.bitmapData(80,80);t.ctx.rect(0,0,80,80),t.ctx.fillStyle="#dcdcdc",t.ctx.fill(),t.ctx.beginPath(),t.ctx.rect(0,0,20,20),t.ctx.rect(20,40,20,20),t.ctx.fillStyle="#fff",t.ctx.fill(),background=this.game.add.tileSprite(0,0,this.game.width,this.game.height,t),background.tint=5592405,this.colorNames=["Red","Blue","Green","Yellow"],this.colors=[16711680,255,65280,16776960],currentColor=this.game.add.bitmapText(Game.w/2,-128,"akashi","",128),currentColor.anchor.setTo(.5,.5),this.scoreText=this.game.add.bitmapText(Game.w-100,48,"akashi","Score: "+score,32),this.scoreText.anchor.setTo(.5,.5),this.comboText=this.game.add.bitmapText(Game.w-100,96,"akashi","X"+combo,64),this.comboText.anchor.setTo(.5,.5),this.comboText.alpha=0,this.comboText.tint=16711680,this.lvlText=this.game.add.bitmapText(32,32,"akashi","Lvl: "+level_names[level],32),this.instructionText=this.game.add.bitmapText(Game.w/2,Game.h/2,"akashi","Click the button that's the same color as the\n word that appears on the screen...easy...right?\n\nClick To Continue",24),this.instructionText.anchor.setTo(.5,.5),this.gameOverText=this.game.add.bitmapText(Game.w/2,Game.h/2,"akashi","",32),this.gameOverText.anchor.setTo(.5,.5),buttonSize=64,buttonbmd=this.game.add.bitmapData(buttonSize,buttonSize),buttonbmd.ctx.strokeStyle="#000",buttonbmd.ctx.rect(0,0,buttonSize,buttonSize),buttonbmd.ctx.fillStyle="#fff",buttonbmd.ctx.fill(),this.red=this.game.add.sprite(Game.w/5,Game.h-buttonSize-64,buttonbmd),this.red.anchor.setTo(.5,.5),this.red.inputEnabled=!0,this.red.events.onInputDown.add(this.actionOnClick,this),this.red.tint=16711680,this.red.name="red",this.blue=this.game.add.sprite(Game.w/5*2,Game.h-buttonSize-64,buttonbmd),this.blue.anchor.setTo(.5,.5),this.blue.inputEnabled=!0,this.blue.events.onInputDown.add(this.actionOnClick,this),this.blue.tint=255,this.blue.name="blue",this.green=this.game.add.sprite(Game.w/5*3,Game.h-buttonSize-64,buttonbmd),this.green.anchor.setTo(.5,.5),this.green.inputEnabled=!0,this.green.events.onInputDown.add(this.actionOnClick,this),this.green.tint=65280,this.green.name="green",this.yellow=this.game.add.sprite(Game.w/5*4,Game.h-buttonSize-64,buttonbmd),this.yellow.anchor.setTo(.5,.5),this.yellow.inputEnabled=!0,this.yellow.events.onInputDown.add(this.actionOnClick,this),this.yellow.tint=16776960,this.yellow.name="yellow",this.debris=this.game.add.bitmapData(20,20),this.debris.ctx.strokeStyle="#000",this.debris.ctx.rect(0,0,20,20),this.debris.ctx.fillStyle="#fff",this.debris.ctx.fill(),this.emitter=this.game.add.emitter(0,0,100),this.emitter.makeParticles(this.debris),this.emitter.gravity=500,this.emitter.minParticleSpeed.setTo(-200,-200),this.emitter.maxParticleSpeed.setTo(200,200),this.heartGauge=[this.game.add.sprite(32,80,"hearts"),this.game.add.sprite(96,80,"hearts"),this.game.add.sprite(160,80,"hearts"),this.game.add.sprite(224,80,"hearts")],this.drawLife(),this.twitterButton=this.game.add.button(this.game.world.centerX,this.game.world.centerY+200,"twitter",this.twitter,this),this.twitterButton.anchor.set(.5),this.twitterButton.visible=!1},drawLife:function(){for(var t=0;4>t;t++)this.heartGauge[t].frame=life>t?t:4;0===life&&(gameOver=!0,resetWait=this.game.time.now+1e3)},updateColor:function(t){if(gameOver!==!0&&this.game.time.now>this.nextWordIn&&gameOver===!1){currentColor.alpha=1,this.nextWordIn=this.game.time.now+t+100,currentColor.setText(this.colorNames[game.rnd.integerInRange(0,3)]),currentColor.tint=this.colors[game.rnd.integerInRange(0,3)],currentColor.y=-128;var e=this.game.add.tween(currentColor).to({y:Game.h/2},t/2,Phaser.Easing.Quadratic.InOut).to({y:Game.h+128},t/2,Phaser.Easing.Quadratic.InOut).start();e.onComplete.add(function(){chosen===!1&&(life-=1,combo=0,this.game.add.tween(this.comboText).to({alpha:0},300).start(),this.drawLife(),this.missSnd.play()),chosen=!1},this)}},actionOnClick:function(t){if(gameOver!==!0&&showInstructions!==!0){{this.game.add.tween(t).to({angle:180},300).start()}t.name===currentColor.text.toLowerCase()&&chosen===!1?(console.log(t.name+" "+currentColor.text.toLowerCase()+" "+chosen),this.boomSnd.play(),currentColor.alpha=0,this.emitter.forEach(function(e){e.tint=t.tint}),this.emitter.x=currentColor.x,this.emitter.y=currentColor.y,this.emitter.start(!0,1e3,null,256),chosen=!0,combo+=1,score+=10*combo,score>this.highestScore&&(this.highestScore=score,localStorage.setItem("atHighestScore",score)),combo>this.highestCombo&&(this.highestCombo=combo,localStorage.setItem("atHighestCombo",combo)),this.scoreText.setText("Score: "+score),this.comboText.setText("X"+combo),this.game.add.tween(this.comboText).to({alpha:1},500).start()):(this.missSnd.play(),chosen=!0,life-=1,combo=0,this.comboText.setText("X"+combo),this.game.add.tween(this.comboText).to({alpha:0},500).start()),this.drawLife()}},update:function(){if(showInstructions===!0)this.game.input.activePointer.isDown&&(showInstructions=!1,this.instructionText.setText(""));else if(gameOver===!0)if(this.game.time.now>resetWait&&this.game.input.activePointer.isDown)this.gameOverText.setText(""),score=0,combo=0,life=4,gameOver=!1,this.twitterButton.visible=!1,this.scoreText.setText("Score: "+score),this.drawLife();else{var t="Game Over:\nYou Scored:  "+score;this.highestScore>0&&(t+="\n\nBest Score:  "+this.highestScore+"\nBest Combo: "+this.highestCombo),t+="\n\nClick To Play Again!",this.gameOverText.setText(t),this.twitterButton.visible=!0}else{if(score>=nextLevel&&5>level)switch(nextLevel*=2,speed-=100,level+=1,life=4,this.lvlText.setText("Lvl: "+level_names[level]),level){case 0:this.lvlText.tint=16777215;break;case 1:this.lvlText.tint=65280;break;case 2:this.lvlText.tint=255;break;case 3:this.lvlText.tint=16776960;break;case 4:this.lvlText.tint=16711680}this.updateColor(speed)}},twitter:function(){window.open("http://twitter.com/share?text=My+best+score+is+"+this.highestScore+"+playing+Against+Type.+See+if+you+can+beat+it.+at&via=rantt_&url=http://www.divideby5.com/games/against_type/&hashtags=AgainstType,1GAM","_blank")}};var game=new Phaser.Game(Game.w,Game.h,Phaser.AUTO,"game");game.state.add("Boot",Game.Boot),game.state.add("Load",Game.Load),game.state.add("Menu",Game.Menu),game.state.add("Play",Game.Play),game.state.start("Boot");