var Game={w:800,h:600};Game.Boot=function(e){this.game=e},Game.Boot.prototype={preload:function(){this.game.stage.backgroundColor="#FFF",this.game.load.image("loading","assets/images/loading.png"),this.game.load.image("title","assets/images/title.png"),this.game.load.image("instructions","assets/images/instructions.png")},create:function(){this.game.state.start("Load")}},Game.Load=function(e){this.game=e},Game.Load.prototype={preload:function(){var e=this.game.add.text(Game.w,Game.h,"Loading...",{font:"30px Helvetica",fill:"#000"});e.anchor.setTo(.5,.5);var t=this.game.add.sprite(Game.w/2-64,Game.h/2+50,"loading");this.game.load.setPreloadSprite(t),this.game.load.spritesheet("star","assets/images/star.png",20,20)},create:function(){this.game.state.start("Menu")}},Game.Menu=function(e){this.game=e},Game.Menu.prototype={create:function(){this.title=this.game.add.sprite(Game.w/2,Game.h/2-100,"title"),this.title.anchor.setTo(.5,.5),this.instructions=this.game.add.sprite(Game.w/2+200,200,"instructions"),this.instructions.scale.x=.5,this.instructions.scale.y=.5;var e=this.game.add.text(Game.w/2,Game.h/2-50,"~click to start~",{font:"30px Helvetica",fill:"#000"});e.anchor.setTo(.5,.5)},update:function(){this.game.input.activePointer.isDown&&this.game.state.start("Play3")}};var wKey,aKey,sKey,dKey;Game.Play=function(e){this.game=e},Game.Play.prototype={create:function(){this.game.world.setBounds(0,0,Game.w,Game.h),this.game.stage.backgroundColor="#000",wKey=this.game.input.keyboard.addKey(Phaser.Keyboard.W),aKey=this.game.input.keyboard.addKey(Phaser.Keyboard.A),sKey=this.game.input.keyboard.addKey(Phaser.Keyboard.S),dKey=this.game.input.keyboard.addKey(Phaser.Keyboard.D),this.starfield=this.game.add.emitter(this.game.world.centerX,this.game.world.centerY,400),this.starfield.makeParticles("star"),this.starfield.minParticleScale=.1,this.starfield.maxParticleScale=.5,this.starfield.physicsBodyType=!0,this.starfield.bounce.setTo(.5,.5),this.starfield.forEach(function(e){e.body.allowGravity=!1,e.x=this.game.rnd.between(0,800),e.y=this.game.rnd.between(0,600),e.body.velocity.x=this.game.rnd.between(-1500,1500),e.body.velocity.y=this.game.rnd.between(-1500,1500)}),this.starfield.start(!1,5e3,5,0)},update:function(){if(this.game.input.activePointer.isDown){this.game.add.tween(this.starfield).to({x:this.game.world.centerX+300},1e3).to({x:this.game.world.centerX},3e3).start()}}};var wKey,aKey,sKey,dKey;Game.Play2=function(e){this.game=e},Game.Play2.prototype={create:function(){this.game.physics.startSystem(Phaser.ARCADE),this.game.world.setBounds(0,0,800,600),this.game.stage.backgroundColor="#000",wKey=this.game.input.keyboard.addKey(Phaser.Keyboard.W),aKey=this.game.input.keyboard.addKey(Phaser.Keyboard.A),sKey=this.game.input.keyboard.addKey(Phaser.Keyboard.S),dKey=this.game.input.keyboard.addKey(Phaser.Keyboard.D),this.stars=this.game.add.group(),this.stars.enableBody=!0,this.stars.physicsBodyType=Phaser.Physics.ARCADE,this.stars.setAll("checkWorldBounds",!0),this.stars.setAll("outOfBoundsKill",!0);for(var e=0;512>e;e++){var t=this.game.rnd.between(0,800),a=this.game.rnd.between(0,600),s=this.game.rnd.between(1,10)/10,i=this.stars.create(t,a,"star");i.scale.x=s,i.scale.y=s,i.checkWorldBounds=!0,i.outOfBoundsKill=!0,i.rotation=this.game.physics.arcade.angleToXY(i,this.game.world.centerX,this.game.world.centerY)}},update:function(){this.stars.forEach(function(e){if(e.alive){var t=this.game.rnd.between(-100,-200);this.game.physics.arcade.velocityFromRotation(e.rotation,t,e.body.velocity)}else{var a=this.game.rnd.between(0,800),s=this.game.rnd.between(0,600),i=this.game.rnd.between(1,6)/10,e=this.stars.getFirstExists(!1);e.reset(a,s),e.scale.x=i,e.scale.y=i,e.rotation=this.game.physics.arcade.angleToXY(e,this.game.world.centerX,this.game.world.centerY)}},this)}};var wKey,aKey,sKey,dKey;Game.Play3=function(e){this.game=e},Game.Play3.prototype={create:function(){this.game.physics.startSystem(Phaser.ARCADE),this.game.world.setBounds(0,0,800,600),this.game.stage.backgroundColor="#000",this.squarebmd=this.game.add.bitmapData(32,32),this.squarebmd.ctx.strokeStyle="#000",this.squarebmd.ctx.rect(0,0,32,32),this.squarebmd.ctx.fillStyle="#fff",this.squarebmd.ctx.fill(),wKey=this.game.input.keyboard.addKey(Phaser.Keyboard.W),aKey=this.game.input.keyboard.addKey(Phaser.Keyboard.A),sKey=this.game.input.keyboard.addKey(Phaser.Keyboard.S),dKey=this.game.input.keyboard.addKey(Phaser.Keyboard.D),this.MAX_DEPTH=800,this.stars=this.game.add.group(),this.stars.enableBody=!0,this.stars.physicsBodyType=Phaser.Physics.ARCADE,this.stars.setAll("checkWorldBounds",!0),this.stars.setAll("outOfBoundsKill",!0);for(var e=0;512>e;e++)this.starFieldSetup()},starFieldSetup:function(){var e=this.game.rnd.between(0,800),t=this.game.rnd.between(0,600),a=(this.game.rnd.between(1,5)/10,this.stars.getFirstExists(!1));null===a?(a=this.stars.create(e,t,this.squarebmd),a.z=0):(e=e,t=t,a.reset(e,t),a.z=0),a.scale.x=a.z/800,a.scale.y=a.z/800,a.checkWorldBounds=!0,a.outOfBoundsKill=!0,a.rotation=this.game.physics.arcade.angleToXY(a,this.game.world.centerX,this.game.world.centerY)},update:function(){this.stars.forEach(function(e){if(e.alive){e.z+=1,e.scale.x=e.z/800,e.scale.y=e.z/800;var t=this.game.rnd.between(-100,-200);this.game.physics.arcade.velocityFromRotation(e.rotation,t,e.body.velocity)}else this.starFieldSetup()},this)}};var game=new Phaser.Game(Game.w,Game.h,Phaser.AUTO,"game");game.state.add("Boot",Game.Boot),game.state.add("Load",Game.Load),game.state.add("Menu",Game.Menu),game.state.add("Play",Game.Play),game.state.add("Play2",Game.Play2),game.state.add("Play3",Game.Play3),game.state.start("Boot");